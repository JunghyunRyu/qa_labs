{
  "title": "입장료 계산 함수 테스트",
  "function_signature": "def calculate_admission_fee(age: int) -> int:",
  "golden_code": "def calculate_admission_fee(age: int) -> int:\n    '''Calculate the admission fee based on age-based discounts.\n\n    Rules:\n    - Base price is 10_000 won.\n    - Age must be between 0 and 120 inclusive; otherwise ValueError is raised.\n    - Children (0–12 years): 50% discount (pay 5_000).\n    - Teenagers (13–18 years): 30% discount (pay 7_000).\n    - Adults (19–64 years): no discount (pay 10_000).\n    - Seniors (65–120 years): 40% discount (pay 6_000).\n\n    The function always returns the final fee as an integer (in won).\n    '''\n    if not isinstance(age, int):\n        raise TypeError(\"age must be an integer\")\n\n    if age < 0 or age > 120:\n        raise ValueError(\"age must be between 0 and 120 inclusive\")\n\n    base_price = 10_000\n\n    if 0 <= age <= 12:\n        discount_rate = 0.5\n    elif 13 <= age <= 18:\n        discount_rate = 0.3\n    elif 19 <= age <= 64:\n        discount_rate = 0.0\n    else:\n        discount_rate = 0.4\n\n    final_fee = int(base_price * (1 - discount_rate))\n    return final_fee\n",
  "buggy_implementations": [
    {
      "bug_description": "나이 구간 경계값(12세, 18세)을 잘못 분류하는 off-by-one 버그로, 12세와 18세에 대해 잘못된 할인 구간과 요금이 적용된다.",
      "buggy_code": "def calculate_admission_fee(age: int) -> int:\n    '''Calculate the admission fee based on age-based discounts (buggy version).'''\n    if not isinstance(age, int):\n        raise TypeError(\"age must be an integer\")\n\n    if age < 0 or age > 120:\n        raise ValueError(\"age must be between 0 and 120 inclusive\")\n\n    base_price = 10_000\n\n    # BUG: off-by-one errors in the age boundaries (12, 18)\n    if 0 <= age < 12:\n        discount_rate = 0.5\n    elif 12 <= age < 18:\n        discount_rate = 0.3\n    elif 18 <= age < 65:\n        discount_rate = 0.0\n    else:\n        discount_rate = 0.4\n\n    final_fee = int(base_price * (1 - discount_rate))\n    return final_fee\n",
      "weight": 4
    },
    {
      "bug_description": "청소년(13~18세) 구간에 잘못된 할인율(20% 할인)을 적용하여 이 구간의 요금이 모두 7,000원이 아니라 8,000원으로 계산된다.",
      "buggy_code": "def calculate_admission_fee(age: int) -> int:\n    '''Calculate the admission fee based on age-based discounts (buggy teen discount).'''\n    if not isinstance(age, int):\n        raise TypeError(\"age must be an integer\")\n\n    if age < 0 or age > 120:\n        raise ValueError(\"age must be between 0 and 120 inclusive\")\n\n    base_price = 10_000\n\n    if 0 <= age <= 12:\n        discount_rate = 0.5\n    elif 13 <= age <= 18:\n        # BUG: wrong discount rate for teenagers (should be 0.3)\n        discount_rate = 0.2\n    elif 19 <= age <= 64:\n        discount_rate = 0.0\n    else:\n        discount_rate = 0.4\n\n    final_fee = int(base_price * (1 - discount_rate))\n    return final_fee\n",
      "weight": 3
    },
    {
      "bug_description": "나이의 유효 범위(0~120세)를 전혀 검사하지 않아, 음수 나이나 120을 초과하는 나이도 정상 요금이 계산되는 버그.",
      "buggy_code": "def calculate_admission_fee(age: int) -> int:\n    '''Calculate the admission fee based on age-based discounts (buggy: no range validation).'''\n    if not isinstance(age, int):\n        raise TypeError(\"age must be an integer\")\n\n    base_price = 10_000\n\n    # BUG: no validation for age < 0 or age > 120\n    if age <= 12:\n        discount_rate = 0.5\n    elif age <= 18:\n        discount_rate = 0.3\n    elif age <= 64:\n        discount_rate = 0.0\n    else:\n        discount_rate = 0.4\n\n    final_fee = int(base_price * (1 - discount_rate))\n    return final_fee\n",
      "weight": 3
    },
    {
      "bug_description": "기본 요금을 10,000원이 아니라 12,000원으로 잘못 설정하여, 모든 나이 구간에서 요금이 일정 비율로 더 비싸게 계산되는 버그.",
      "buggy_code": "def calculate_admission_fee(age: int) -> int:\n    '''Calculate the admission fee based on age-based discounts (buggy base price).'''\n    if not isinstance(age, int):\n        raise TypeError(\"age must be an integer\")\n\n    if age < 0 or age > 120:\n        raise ValueError(\"age must be between 0 and 120 inclusive\")\n\n    # BUG: wrong base price (should be 10_000)\n    base_price = 12_000\n\n    if 0 <= age <= 12:\n        discount_rate = 0.5\n    elif 13 <= age <= 18:\n        discount_rate = 0.3\n    elif 19 <= age <= 64:\n        discount_rate = 0.0\n    else:\n        discount_rate = 0.4\n\n    final_fee = int(base_price * (1 - discount_rate))\n    return final_fee\n",
      "weight": 2
    }
  ],
  "description_md": "## 문제 설명\n\n한 놀이공원의 온라인 예매 시스템에서는 **나이에 따라 입장료를 다르게 적용**하고 있습니다. 이 로직이 잘못되면 특정 연령대 고객에게 과금하거나, 너무 적게 받는 문제가 발생할 수 있습니다. 따라서 나이 기반 요금 계산 로직은 테스트 관점에서 매우 중요합니다.\n\n이번 과제에서 여러분은 다음 함수를 대상으로 테스트 코드를 작성하게 됩니다.\n\n```python\ndef calculate_admission_fee(age: int) -> int:\n    ...\n```\n\n### 함수 동작\n- 기본 요금은 **10,000원**입니다.\n- 나이는 정수형 `age`로 받습니다.\n- 나이는 **0 이상 120 이하**만 유효하며, 범위를 벗어나면 예외가 발생해야 합니다.\n- 나이에 따라 다음과 같이 요금이 결정됩니다.\n  - **어린이 (0~12세)**: 50% 할인 → 5,000원\n  - **청소년 (13~18세)**: 30% 할인 → 7,000원\n  - **성인 (19~64세)**: 할인 없음 → 10,000원\n  - **노인 (65~120세)**: 40% 할인 → 6,000원\n- 반환값은 항상 **정수형 요금(원 단위)**입니다.\n\n### 정상 동작 예시\n- `calculate_admission_fee(10)` → `5000`  (어린이)\n- `calculate_admission_fee(16)` → `7000`  (청소년)\n- `calculate_admission_fee(30)` → `10000` (성인)\n- `calculate_admission_fee(70)` → `6000`  (노인)\n\n### 테스트 아이디어 힌트\n이 문제는 특히 **동등 분할(equivalence partitioning)**과 **요금 계산(pricing logic)**을 정확히 이해하고 테스트로 표현하는지를 평가합니다.\n\n다음과 같은 관점에서 테스트 케이스를 설계해 보세요.\n\n1. **나이 구간별 대표값 테스트**\n   - 어린이/청소년/성인/노인 각 구간에서 대표 나이 하나씩 골라, 기대 요금이 맞는지 확인해 보세요.\n   - 예: 5세, 15세, 40세, 80세 등.\n\n2. **경계값 테스트**\n   - 구간이 바뀌는 경계 나이에서 오류가 자주 발생합니다.\n   - 예: `12`, `13`, `18`, `19`, `64`, `65`와 같이 **구간 전후 1살 차이**를 함께 테스트해 보세요.\n\n3. **유효하지 않은 나이 입력 테스트**\n   - 나이가 음수이거나(`-1`), 너무 크거나(`121` 등) 한 경우에 대해 어떻게 동작해야 하는지 확인해 보세요.\n   - 이런 입력은 정상 요금이 계산되기보다는 예외 발생 등의 방식으로 처리되어야 합니다.\n\n4. **요금 금액 검증**\n   - 단순히 \"할인이 적용되었다\"는 것만이 아니라, 실제 계산된 금액이 **정확한지**를 검증해야 합니다.\n   - 예: 청소년 구간에서 8,000원이 아닌 7,000원이 나오는지, 노인 요금이 6,000원인지 등.\n\n플랫폼에는 위 사양을 지키지 않는 여러 \"버그가 심어진 구현\"들이 준비되어 있습니다. 여러분의 목표는 **pytest 기반의 단위 테스트를 작성하여, 이러한 버그 구현들을 최대한 많이 적발하는 것**입니다.\n\n- 하나의 테스트 파일에서 여러 입력 케이스를 조합해 **동등 분할**을 잘 커버해 보세요.\n- 가격 정책이 조금만 달라져도 테스트가 실패하도록, **구체적인 기대 요금 금액**을 검증하는 테스트를 작성하는 것이 좋습니다.\n\n테스트 코드는 `pytest`를 사용하여 작성하면 되며, 제공된 템플릿을 참고해 자유롭게 확장해 주세요.\n",
  "initial_test_template": "import pytest\nfrom target import calculate_admission_fee\n\n\ndef test_partitions_child_teen_adult_senior():\n    # TODO: 각 나이 구간(어린이/청소년/성인/노인)에 대해\n    # 대표 나이값을 사용하여 예상 요금이 정확히 계산되는지 검증하세요.\n    # 예: 10세, 15세, 30세, 70세 등.\n    pass\n\n\ndef test_age_boundaries():\n    # TODO: 경계값(12, 13, 18, 19, 64, 65세 등)에 대해\n    # 올바른 연령 구간과 요금이 적용되는지 확인하는 테스트를 작성하세요.\n    # 동등 분할 + 경계값 분석 관점에서 양쪽 값을 모두 포함해 보세요.\n    pass\n\n\ndef test_invalid_ages():\n    # TODO: 음수 나이(-1)나 120을 초과하는 나이(121 등)에 대해\n    # ValueError가 발생하는지, 혹은 잘못된 요금이 계산되지 않는지 검증하세요.\n    # 유효 범위를 벗어난 입력 구간을 하나의 동등 분할로 보고 테스트를 설계해 보세요.\n    pass\n",
  "tags": [
    "easy",
    "equivalence partitioning",
    "pricing logic",
    "age-based discount",
    "ticketing",
    "python",
    "pytest"
  ],
  "difficulty": "Easy",
  "strong_test_code": "import pytest\nfrom target import calculate_admission_fee\n\n\ndef test_partitions_child_teen_adult_senior():\n    # 각 나이 구간 대표값 - 기본 가격 버그 잡기\n    assert calculate_admission_fee(5) == 5000    # 어린이 50% 할인\n    assert calculate_admission_fee(15) == 7000   # 청소년 30% 할인\n    assert calculate_admission_fee(30) == 10000  # 성인 할인 없음\n    assert calculate_admission_fee(70) == 6000   # 노인 40% 할인\n\n\ndef test_age_boundaries():\n    # 경계값 - off-by-one 버그 잡기\n    assert calculate_admission_fee(12) == 5000   # 어린이 경계 (포함)\n    assert calculate_admission_fee(13) == 7000   # 청소년 시작\n    assert calculate_admission_fee(18) == 7000   # 청소년 경계 (포함)\n    assert calculate_admission_fee(19) == 10000  # 성인 시작\n    assert calculate_admission_fee(64) == 10000  # 성인 경계 (포함)\n    assert calculate_admission_fee(65) == 6000   # 노인 시작\n\n\ndef test_teen_discount_rate():\n    # 청소년 할인율 버그 잡기 (30% 할인 = 7000원)\n    assert calculate_admission_fee(14) == 7000\n    assert calculate_admission_fee(16) == 7000\n    assert calculate_admission_fee(17) == 7000\n\n\ndef test_invalid_ages():\n    # 범위 검증 버그 잡기\n    with pytest.raises(ValueError):\n        calculate_admission_fee(-1)\n    with pytest.raises(ValueError):\n        calculate_admission_fee(121)\n    with pytest.raises(ValueError):\n        calculate_admission_fee(-100)\n"
}